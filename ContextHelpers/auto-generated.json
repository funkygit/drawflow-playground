[
    {
        "NodeKey": "end",
        "DisplayName": "End",
        "NodeType": "Control",
        "NodeTypeKey": "control",
        "NodeTypeOrder": 1,
        "ExecutionMode": "BuiltIn",
        "DllPath": null,
        "VariantSource": null,
        "Variants": [
            {
                "Value": "default",
                "Label": "End Node",
                "Outputs": []
            }
        ]
    },
    {
        "NodeKey": "loop",
        "DisplayName": "Loop",
        "NodeType": "Control",
        "NodeTypeKey": "control",
        "NodeTypeOrder": 1,
        "ExecutionMode": "BuiltIn",
        "DllPath": null,
        "VariantSource": null,
        "Variants": [
            {
                "Value": "default",
                "Label": "Loop Node",
                "Outputs": [
                    {
                        "Name": "Next",
                        "DataType": "System.Object"
                    }
                ]
            }
        ]
    },
    {
        "NodeKey": "conditional",
        "DisplayName": "Conditional",
        "NodeType": "Control",
        "NodeTypeKey": "control",
        "NodeTypeOrder": 1,
        "ExecutionMode": "BuiltIn",
        "DllPath": null,
        "VariantSource": null,
        "Variants": [
            {
                "Value": "default",
                "Label": "Conditional Node",
                "Constructor": {
                    "Parameters": [
                        {
                            "Name": "lhsSource",
                            "DisplayName": "Left-Hand Side (Source Output)",
                            "Order": 1,
                            "DataType": "System.Object",
                            "Source": "NODE_OUTPUT"
                        },
                        {
                            "Name": "operator",
                            "DisplayName": "Operator",
                            "Order": 2,
                            "DataType": "System.String",
                            "Source": "USER_INPUT",
                            "AllowedValues": [
                                "Equals",
                                "NotEquals",
                                "GreaterThan",
                                "LessThan"
                            ]
                        },
                        {
                            "Name": "rhsValue",
                            "DisplayName": "Right-Hand Side (Value)",
                            "Order": 3,
                            "DataType": "System.String",
                            "Source": "USER_INPUT"
                        }
                    ]
                },
                "Outputs": [
                    {
                        "Name": "True",
                        "DataType": "System.Boolean",
                        "Description": "Condition met — routes to true branch"
                    },
                    {
                        "Name": "False",
                        "DataType": "System.Boolean",
                        "Description": "Condition not met — routes to false branch"
                    }
                ]
            }
        ]
    },
    {
        "NodeKey": "iterator",
        "DisplayName": "Iterator",
        "NodeType": "Control",
        "NodeTypeKey": "control",
        "NodeTypeOrder": 1,
        "ExecutionMode": "BuiltIn",
        "DllPath": null,
        "VariantSource": null,
        "Variants": [
            {
                "Value": "default",
                "Label": "Iterator Node",
                "Constructor": {
                    "Parameters": [
                        {
                            "Name": "iterationMode",
                            "DisplayName": "Iteration Mode",
                            "Order": 1,
                            "DataType": "System.String",
                            "Source": "USER_INPUT",
                            "AllowedValues": [
                                "Collection",
                                "Count"
                            ]
                        },
                        {
                            "Name": "sourceCollection",
                            "DisplayName": "Source Collection",
                            "Order": 2,
                            "DataType": "System.Object",
                            "Source": "NODE_OUTPUT",
                            "VisibleWhen": {
                                "Field": "iterationMode",
                                "Value": "Collection"
                            }
                        },
                        {
                            "Name": "count",
                            "DisplayName": "Iteration Count",
                            "Order": 3,
                            "DataType": "System.Int32",
                            "Source": "USER_INPUT",
                            "Value": 1,
                            "VisibleWhen": {
                                "Field": "iterationMode",
                                "Value": "Count"
                            }
                        }
                    ]
                },
                "Outputs": [
                    {
                        "Name": "CurrentItem",
                        "DataType": "System.Object",
                        "Description": "Current iteration item/index"
                    },
                    {
                        "Name": "Exit",
                        "DataType": "System.Object",
                        "Description": "Iteration complete"
                    }
                ]
            }
        ]
    },
    {
        "NodeKey": "multi_provider_storage",
        "DisplayName": "Cloud Storage Node",
        "NodeType": "Processing",
        "NodeTypeKey": "processing",
        "NodeTypeOrder": 3,
        "ExecutionMode": "Transient",
        "DllPath": "External/CloudStorageProvider.dll",
        "VariantSource": "Provider",
        "Variants": [
            {
                "Value": "AWS",
                "Label": "Amazon Web Services (S3)",
                "TypeName": "Amazon.S3.S3Client",
                "Constructor": {
                    "Parameters": [
                        {
                            "Name": "accessKey",
                            "DisplayName": "AWS Access Key",
                            "Order": 1,
                            "DataType": "System.String",
                            "Source": "USER_INPUT",
                            "Value": "AKIA..."
                        },
                        {
                            "Name": "secretKey",
                            "DisplayName": "AWS Secret Key",
                            "Order": 2,
                            "DataType": "System.String",
                            "Source": "USER_INPUT",
                            "Value": "SECRET..."
                        }
                    ]
                },
                "ExecutionFlow": [
                    {
                        "Sequence": 1,
                        "MethodName": "PutObjectAsync"
                    }
                ],
                "Outputs": [
                    {
                        "Name": "S3Url",
                        "DataType": "System.String"
                    }
                ]
            },
            {
                "Value": "Azure",
                "Label": "Azure Blob Storage",
                "TypeName": "Azure.Storage.Blobs.BlobClient",
                "Constructor": {
                    "Parameters": [
                        {
                            "Name": "connectionString",
                            "DisplayName": "Azure Connection String",
                            "Order": 1,
                            "DataType": "System.String",
                            "Source": "USER_INPUT",
                            "Value": "DefaultEndpointsProtocol=..."
                        }
                    ]
                },
                "ExecutionFlow": [
                    {
                        "Sequence": 1,
                        "MethodName": "UploadAsync"
                    }
                ],
                "Outputs": [
                    {
                        "Name": "BlobUri",
                        "DataType": "System.String"
                    }
                ]
            }
        ]
    },
    {
        "NodeKey": "image_splitter",
        "DisplayName": "Image Splitter",
        "NodeType": "Processing",
        "NodeTypeKey": "processing",
        "NodeTypeOrder": 2,
        "ExecutionMode": "Transient",
        "DllPath": "External/ImageTools.dll",
        "VariantSource": null,
        "Variants": [
            {
                "Value": "default",
                "Label": "Image Splitter",
                "TypeName": "ImageTools.Splitter",
                "Constructor": {
                    "Parameters": [
                        {
                            "Name": "imagePath",
                            "DisplayName": "Image Path",
                            "Order": 1,
                            "DataType": "System.String",
                            "Source": "NODE_OUTPUT",
                            "Value": null
                        },
                        {
                            "Name": "rows",
                            "DisplayName": "Rows",
                            "Order": 2,
                            "DataType": "System.Int32",
                            "Source": "USER_INPUT",
                            "Value": 2
                        },
                        {
                            "Name": "columns",
                            "DisplayName": "Columns",
                            "Order": 3,
                            "DataType": "System.Int32",
                            "Source": "USER_INPUT",
                            "Value": 2
                        }
                    ]
                },
                "ExecutionFlow": [
                    {
                        "Sequence": 1,
                        "MethodName": "Split",
                        "Parameters": [
                            {
                                "Name": "outputDirectory",
                                "DisplayName": "Output Directory",
                                "Order": 1,
                                "DataType": "System.String",
                                "Source": "USER_INPUT",
                                "Value": "output/pieces"
                            }
                        ]
                    }
                ],
                "Outputs": [
                    {
                        "Name": "Pieces",
                        "DataType": "System.Collections.Generic.List`1[System.String]",
                        "Description": "List of file paths for each image piece"
                    },
                    {
                        "Name": "PieceCount",
                        "DataType": "System.Int32",
                        "Description": "Total number of pieces created"
                    }
                ]
            }
        ]
    },
    {
        "NodeKey": "tcp_server",
        "DisplayName": "TCP Server",
        "NodeType": "IO",
        "NodeTypeKey": "io",
        "NodeTypeOrder": 4,
        "ExecutionMode": "LongRunning",
        "DllPath": "External/NetworkTools.dll",
        "VariantSource": null,
        "Lifecycle": {
            "OnStart": {
                "MethodName": "StartListening",
                "Parameters": [
                    {
                        "Name": "port",
                        "DisplayName": "Port",
                        "Order": 1,
                        "DataType": "System.Int32",
                        "Source": "USER_INPUT",
                        "Value": 9000
                    }
                ]
            },
            "OnEvent": {
                "MethodName": "OnDataReceived",
                "Emits": [
                    "DataReceived"
                ]
            },
            "OnStop": {
                "MethodName": "StopListening"
            }
        },
        "Variants": [
            {
                "Value": "default",
                "Label": "TCP Server",
                "TypeName": "NetworkTools.TcpServer",
                "Constructor": {
                    "Parameters": [
                        {
                            "Name": "host",
                            "DisplayName": "Host Address",
                            "Order": 1,
                            "DataType": "System.String",
                            "Source": "USER_INPUT",
                            "Value": "0.0.0.0"
                        },
                        {
                            "Name": "port",
                            "DisplayName": "Port",
                            "Order": 2,
                            "DataType": "System.Int32",
                            "Source": "USER_INPUT",
                            "Value": 9000
                        },
                        {
                            "Name": "bufferSize",
                            "DisplayName": "Buffer Size (bytes)",
                            "Order": 3,
                            "DataType": "System.Int32",
                            "Source": "USER_INPUT",
                            "Value": 4096
                        }
                    ]
                },
                "Outputs": [
                    {
                        "Name": "ReceivedData",
                        "DataType": "System.String",
                        "Description": "Data received from connected client"
                    },
                    {
                        "Name": "ClientAddress",
                        "DataType": "System.String",
                        "Description": "IP address of the connected client"
                    }
                ]
            }
        ]
    }
]